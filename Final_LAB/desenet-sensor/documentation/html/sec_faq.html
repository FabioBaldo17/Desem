<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DeseNet Documentation: Frequently asked Questions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">DeseNet Documentation
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="index.html">index</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Frequently asked Questions </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="sec_faq"></a>
Frequently asked Questions</h1>
<h2><a class="anchor" id="faq_general"></a>
General</h2>
<p><b>Q:</b> The DeseNet Sensor project is a large project. Could you tell me where to jump into the project?</p>
<p><b>A:</b> First you need to understand the specification of the network protocol. Then you can jump either into reading the doxygen help of the sensor project or/and start examining the source files of the project. You need to know how the AbstractApplication class works. The same for the NetworkEntity and the Beacon class. Try to understand the code step by step. You are growing together with the project!</p>
<p><b>Q:</b> The DeseNet Sensor project is too big for me. Could you tell me where is it best to start coding?</p>
<p><b>A:</b> Put a breakpoint into the AbstractApplication::svSyncRequest() method, compile the project. Start and configure the MeshSimulator, start the TestBench. Then start debugging of your sensor application. Because the AccelerometerApplication wants to get informed about arrival of beacons from the TestBench, the debugger will stop on the breakpoint. Now you should add code to forward the request to the NetworkEntiy, because the NetworkEntity handles all svSyncRequests().</p>
<p><b>Q:</b> When I compile for the Olimex target, the linker tells me that it has not enough Flash to put the application in it. Why is my application/firmware file too big?</p>
<p><b>A:</b> You may use something from the STL library which makes your firmware file growing too much. If you use for example the std::cout function from iostream, your file linked gets about 100kB bigger! The MCU used has a flash size of 128kB. This means if you are using cout you have 28kB left for your application! If this is the case get rid of all the couts and use printf instead.</p>
<p>Do not forget to remove also all inclusions of iostream (#include &lt;iostream&gt;)! Otherwise the file size of the firmware will stay too big!</p>
<p><b>Q:</b> I am not able to download the application and debug it.</p>
<p><b>A:</b> First verify that the Olimex board is powered up correctly. Jumper right on the AA battery holder. The check the flat cable connections on the Universal Tracer. There should be 2 LEDs light up. One showing the USB connection the other showing that the Olimex board is powered up correctly. Maybe the MCU is in sleep mode... then ... <br />
 </p>
<h2><a class="anchor" id="faq_code"></a>
Code Related</h2>
<p><b>Q:</b> Why does the static method NetworkEntity::instance() not create a new instance of NetworkEntity when it gets called the first time?</p>
<p><b>A:</b> In Embedded Systems it is often not allowed to call <em>malloc</em> or <em>new</em> because of the usage of a static memory model. So the instance() method cannot call the new function to create a new instance.</p>
<p>In the DeseNet project we decided to let the developer choose where to create the instances for the single objects. Most of the single instances are created using the <a class="el" href="classFactory.html" title="Provides access to general instances. Initializes and builds the application. ">Factory</a> class. The NetworkEntity instance is created as attribute in the Net class. The Net class is also a Singleton and gets created in the <a class="el" href="classFactory.html" title="Provides access to general instances. Initializes and builds the application. ">Factory</a>.</p>
<p>This means the NetworkEntity instance will start to live as soon as the Net instance gets created. <br />
 <b>Q:</b> When I am calling the static method <a class="el" href="classdesenet_1_1sensor_1_1NetworkEntity.html#a09e8994b9ae96a4850378af13e78d6ed" title="Returns reference to single instance. ">desenet::sensor::NetworkEntity::instance()</a> the program stops exection after the call of the assert() function.</p>
<p><b>A:</b> If the program stops on an assert() function, the expression given as parameter results to <em>false</em>. This causes the program to stop execution.</p>
<p>For the NetworkEntity::instance() method it means that at the time of the method call no instance of the class was created. This is typically the case when the methods NetworkEntity::instance() gets called prior to the execution of the code <em>net().initialize(__SLOT_NUMBER)</em> which is called in Factory::buildApplication().</p>
<p><b>Q:</b> Where is the single instance of NetworkEntity living? I did not find it in the <a class="el" href="classFactory.html" title="Provides access to general instances. Initializes and builds the application. ">Factory</a> class!</p>
<p><b>A:</b> The NetworkEntity is part of the Net class and lives as attribute inside this class. The NetworkEntity instance gets created when the Net instance gets created. After the creation and intialization of the Net instance the NetworkEntity can be generally accessed from everywhere in the code using the NetworkEntity::instance() method.</p>
<p><b>Q:</b> The Olimex-Board simulator (MeshSim) shows always the same slot number. If I change the constant DESENET_SLOT_NUMBER in 'linux-meshsim/platform-config.h', the value is not taken into account! How do I change the slot number when using the Olimex-Board simulator?</p>
<p><b>A:</b> When using the Olimex-Board simulator there is an option to change the slot number by application argument. With the '-s' argument you can change the slot number of the application and the value takes presedents of the value provided in the 'platform-config.h' file. Got to the debug launch configurations of Eclipse and change there the '-s' value for the application. The value given there will be used as slot number and also shown on the Olimex-Board simulator view.</p>
<h2><a class="anchor" id="faq_testbench"></a>
TestBench Related</h2>
<p><b>Q:</b> I cannot start the DeseNet TestBench application! What could be the problem?</p>
<p><b>A:</b> A problem could be that IPv6 is enabled on the Ubunu installation. Try to disalbe IPv6 by adding the following lines to the /etc/sysctl.conf file: </p><div class="fragment"><div class="line">net.ipv6.conf.all.disable_ipv6 = 1</div><div class="line">net.ipv6.conf.default.disable_ipv6 = 1</div><div class="line">net.ipv6.conf.lo.disable_ipv6 = 1</div></div><!-- fragment --><p>reload sysctl by entering the following command in a terminal window: </p><pre class="fragment">$ sudo sysctl -p  </pre><p> IPv6 should now be disabled and the DeseNet TestBench application should start now.</p>
<p>For more information on this topic see: <a href="http://askubuntu.com/questions/440649/how-to-disable-ipv6-in-ubuntu-14-04">How to disable IPv6 in Ubuntu 14.04?</a></p>
<h2><a class="anchor" id="faq_debug"></a>
Flash and Debug Related</h2>
<p><b>Q:</b> When I try to download and debug the firmware for the Olimex board I get the following OpenOCD error: </p><pre class="fragment">Error: unable to open ftdi device with vid 0403, pid cff8, description 'Amontec JTAGkey-2' and serial '*' </pre><p><b>A:</b> Check if the <em>Universal Tracer</em> is seen in your operating system. Open a terminal enter the following command </p><pre class="fragment">$ lsusb  </pre><p> to let the system output the names of the devices connected via USB. In this list you should find the following entry: </p><pre class="fragment">ID 0403:cff8 Future Technology Devices International, Ltd Amontec JTAGkey </pre><p> This entry shows the presens of the <em>Universal Tracer</em>.</p>
<p>If this entry is not there the device was probably connected to you host operating system. In this case you need to tell you virtual machine client (VMWare, etc.) to connect the USB device to the virtual machine running Ubuntu. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Nov 18 2019 15:16:41 for DeseNet Documentation by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
